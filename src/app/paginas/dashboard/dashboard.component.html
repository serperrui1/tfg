<div class="wrapper">

    <div class="row">
        <div class="col-md-9 form-div ">
            <div *ngIf="administrador">
                <h3 class="card-title text-center">Historial de todos los pedidos</h3>
                <div class="descripcion-container">
                    <table matSort (matSortChange)="sortData($event)">
                        <tr>
                            <th>ID del Producto</th>
                            <th>Título del Producto</th>
                            <th mat-sort-header="precio">Precio</th>
                            <th mat-sort-header="unidades">Unidades</th>
                            <th>Comprador</th>
                            <th>Nombre</th>
                            <th>Proveedor</th>
                            <th>Nombre </th>
                        </tr>
                        <tr *ngFor="let pedido of sortedData; let i=index">
                            <td>{{pedido.producto}}</td>
                            <td id="producto{{i}}"></td>
                            <td>{{pedido.precio}}</td>
                            <td>{{pedido.unidades}}</td>
                            <td>{{pedido.comprador}}</td>
                            <td>{{pedido.nombreComprador}}</td>
                            <td>{{pedido.proveedor}}</td>
                            <td id="proveedor{{i}}"></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div *ngIf="proveedor">
                <h3 class="card-title text-center">Historial de pedidos realizados a mi tienda</h3>
                <div class="descripcion-container">
                    <table matSort (matSortChange)="sortData($event)">
                        <tr>
                            <th>ID del Producto</th>
                            <th>Título del Producto</th>
                            <th mat-sort-header="precio">Precio</th>
                            <th mat-sort-header="unidades">Unidades</th>
                            <th>Comprador</th>
                            <th>Nombre</th>
                        </tr>
                        <tr *ngFor="let pedido of sortedData; let i=index">
                            <td>{{pedido.producto}}</td>
                            <td id="producto{{i}}"></td>
                            <td>{{pedido.precio}}</td>
                            <td>{{pedido.unidades}}</td>
                            <td>{{pedido.comprador}}</td>
                            <td>{{pedido.nombreComprador}}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-9 form-div ">
            <div *ngIf="administrador">
                <h3 class="card-title text-center">Historial de todos los productos</h3>
                <div class="descripcion-container">
                    <table matSort (matSortChange)="sortData2($event)">
                        <tr>
                            <th>ID del Producto</th>
                            <th>Título del Producto</th>
                            <th mat-sort-header="precio">Precio</th>
                            <th mat-sort-header="stock">Stock</th>
                            <th mat-sort-header="numValoraciones">Nº de valoraciones</th>
                            <th mat-sort-header="numeroVentas">Nº de ventas (pedidos)</th>
                            <th>Proveedor</th>
                            <th>Nombre </th>
                        </tr>
                        <tr *ngFor="let productoConVentas of sortedData3; let i=index">
                            <td>{{productoConVentas.producto._id}}</td>
                            <td>{{productoConVentas.producto.titulo}}</td>
                            <td>{{productoConVentas.producto.precio}}</td>
                            <td>{{productoConVentas.producto.stock}}</td>
                            <td>{{productoConVentas.producto.valoraciones.length}}</td>
                            <td>{{productoConVentas.ventas}}</td>
                            <td>{{productoConVentas.producto.proveedor}}</td>
                            <td>{{productoConVentas.producto.proveedorNombre}}</td>
                        </tr>
                    </table>
                </div>
            </div>
            <div *ngIf="proveedor">
                <h3 class="card-title text-center">Historial de mis productos</h3>
                <div class="descripcion-container">
                    <table matSort (matSortChange)="sortData2($event)">
                        <tr>
                            <th>ID del Producto</th>
                            <th>Título del Producto</th>
                            <th mat-sort-header="precio">Precio</th>
                            <th mat-sort-header="stock">Stock</th>
                            <th mat-sort-header="numValoraciones">Nº de valoraciones</th>
                            <th mat-sort-header="numeroVentas">Nº de ventas (pedidos)</th>
                        </tr>
                        <tr *ngFor="let productoConVentas of sortedData3; let i=index">
                            <td>{{productoConVentas.producto._id}}</td>
                            <td>{{productoConVentas.producto.titulo}}</td>
                            <td>{{productoConVentas.producto.precio}}</td>
                            <td>{{productoConVentas.producto.stock}}</td>
                            <td>{{productoConVentas.producto.valoraciones.length}}</td>
                            <td>{{productoConVentas.ventas}}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-9 form-div ">
            <div style="display: block" *ngIf="administrador">
                <h3 class="card-title text-center">Historial de registros de usuarios</h3>
                <canvas mdbChart [chartType]="chartType" [datasets]="chartDatasets" [labels]="chartLabels" [colors]="chartColors" [options]="chartOptions" [legend]="true" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)">
                    </canvas>
            </div>
        </div>
    </div>


    <div class="row">
        <div class="col-md-9 form-div ">
            <div style="display: block">
                <h3 class="card-title text-center" *ngIf="administrador">Historial de ventas por mes</h3>
                <h3 class="card-title text-center" *ngIf="proveedor">Historial de mis ventas por mes</h3>
                <canvas mdbChart [chartType]="chartTypeB" [datasets]="chartDatasetsB" [labels]="chartLabels" [colors]="chartColorsB" [options]="chartOptions" [legend]="true" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)">
            </canvas>
            </div>
        </div>
    </div>

</div>